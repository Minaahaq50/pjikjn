<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ØªØ´ÙÙŠØ± Ù…Ù„Ù JSON</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
<style>
  body { font-family: Arial; background: #111; color: #fff; padding: 20px; }
  .box { background: #222; padding: 20px; border-radius: 10px; width: 400px; margin: auto; }
  input, button { width: 100%; padding: 12px; margin-top: 10px; border-radius: 6px; border: none; }
  button { background: #00aaff; color: white; font-size: 16px; cursor: pointer; }
</style>
</head>
<body>

<div class="box">
  <h2>ğŸ” ØªØ´ÙÙŠØ± Ù…Ù„Ù JSON</h2>

  <label>Ø§Ø®ØªØ± Ù…Ù„Ù JSON:</label>
  <input type="file" id="fileInput" accept=".json">

  <label>Ø§ÙƒØªØ¨ ÙƒÙ„Ù…Ø© Ø³Ø± Ø§Ù„ØªØ´ÙÙŠØ±:</label>
  <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø³Ø± Ù‚ÙˆÙŠØ©">

  <button onclick="encryptFile()">ØªØ´ÙÙŠØ± Ø§Ù„Ù…Ù„Ù</button>

  <p id="status"></p>
</div>

<script>
function encryptFile() {
    const fileInput = document.getElementById("fileInput").files[0];
    const password = document.getElementById("password").value;

    if (!fileInput) {
        alert("Ø§Ø®ØªØ± Ù…Ù„Ù JSON Ø£ÙˆÙ„Ø§Ù‹");
        return;
    }
    if (!password) {
        alert("Ø§ÙƒØªØ¨ ÙƒÙ„Ù…Ø© Ø³Ø± Ø§Ù„ØªØ´ÙÙŠØ±");
        return;
    }

    const reader = new FileReader();
    reader.onload = function(event) {
        const jsonData = event.target.result;

        // ØªØ´ÙÙŠØ± AES
        const encrypted = CryptoJS.AES.encrypt(jsonData, password).toString();

        // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ø¬Ø¯ÙŠØ¯
        const blob = new Blob([encrypted], { type: "text/plain" });
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = "encrypted.json";
        link.click();

        document.getElementById("status").innerText = "âœ”ï¸ ØªÙ… Ø§Ù„ØªØ´ÙÙŠØ± ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù";
    };

    reader.readAsText(fileInput);
}
</script>

</body>
</html>
